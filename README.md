<!-- PROJECT LOGO -->
<br />
<div align="center">
  <a href="https://www.curbit.com/">
    <img src="https://uploads-ssl.webflow.com/60066c7287d96dc62123c966/63334f79313aa01d173332ce_curbit%20logo%404x-p-800.png" alt="Logo" width="80" height="60">
  </a>
<h3 align="center">Notification center</h3>
  <p align="center">
   <a href="https://excellent-tiara-b60.notion.site/Full-stack-engineer-assessment-0cb6cb5171bf4f6b8e0ea71ee0a5a436"><strong>Assessment Curbit</strong></a>
  </p>
</div>


<!-- ABOUT THE PROJECT -->
## About The Project

Curbit needs to develop an ordering system that processes orders from different restaurants

## Context

![image](https://github.com/4dagio/assessment/assets/3275936/a23a4b68-9053-4999-9161-f46c278f660e)


### Process description

1. Restaurant generate orders from differents sources like: POS or KDC
2. Orders add to service bus 
3. Services OrdersEngine read the messages from queue to process approach the rules and status
4. Service NotificationEngine read the messages from queue to update Order and notify to users when status is: 'prepared'||'ready'


### Built With

* [[Node]](https://nodejs.org/en/about)

## High-level architecture

![image](https://github.com/4dagio/assessment/assets/3275936/faf1a616-440e-468f-a0ba-fabf34423692)

### Notes: it is assumed that:


1. The data source has the capacity to call rest or soap services.
2. The amount of transactions are within the capacity of the premiere layer of the azure api management (approx. 100,000,000 calls each month).
3. Notifications will be sent to mobile devices.
4. Observability will be enabled with AppInsights and Monitor.

### Explanation
In this case, I include terms such as Order, Restaurant, User, Status, Queue, Notification.

- **Function OrderEngine:**  It's responsible for accepting orders and persisting orders to the database.
- **Function OrderNotification:** The patch function is responsible for managing the lifecycle of an order once it has been placed and persisted to the Cosmos database. It would have the following responsibilities:

    - Message Handling: This context would listen for new messages on the Update queue in Azure Service Bus. These messages would be generated by other parts of your system (like the Order Processing context), and they would represent some kind of change that needs to be applied to an existing order, such as a status update. Each message would need to contain enough information to identify the order that it relates to: source_id, restaurant_id, order_id and the nature of the update that should be applied (e.g., a new status).

    - This is the function within the context that carries out the business logic related to order updates. It might handle the extraction of data from incoming messages, apply business rules, depends of the new state: placed or ready to go. 

    - Data Updating: The repository layer would communicate with the Cosmos DB, apply the necessary update (like changing the order's status), and handle any errors that might occur (like if no order with the given order_id exists).

- **Event Notification:** This event emit domain events to signal that an order has been updated. These events send a trigger to notification hub for sending a notification to the user with the updates.

- The "Order Updating" bounded context would also need to include mechanisms for error handling and logging. For example, if an update message is received for an order that doesn't exist in the database, the system should log an error and handle it gracefully. This could involve sending a message back to the queue to retry later, or moving it to a "dead-letter" queue for manual investigation.


### NFR

<!-- GETTING STARTED -->
## Codebase



<!-- CONTACT -->
## Contact

Your Name - [@twitter_handle](https://twitter.com/twitter_handle) - email@email_client.com

Project Link: [https://github.com/github_username/repo_name](https://github.com/github_username/repo_name)

<p align="right">(<a href="#readme-top">back to top</a>)</p>



